# ============================================
# AUTO-REPARE v3.0 - Configuration Template
# Dual LLM Architecture (Qwen + Phi-3)
# ============================================
# Copier ce fichier vers .env et remplir les valeurs

# === UPTIME KUMA ===
UPTIME_KUMA_PORT=3001

# === N8N WEBHOOK ===
N8N_WEBHOOK_URL=https://n8n.yourdomain.com/webhook/
N8N_WEBHOOK_BASE_URL=https://n8n.yourdomain.com/webhook
N8N_WEBHOOK_SECRET=your-webhook-secret-here

# === SSH VPS ===
VPS_HOST=your-vps-ip
VPS_PORT=22
VPS_USER=root
VPS_SSH_KEY_PATH=/root/.ssh/id_ed25519

# === OLLAMA (Local LLMs) ===
OLLAMA_URL=http://localhost:11434

# Qwen 2.5 Coder 3B - Actor (Proposes actions)
OLLAMA_ACTOR_MODEL=qwen2.5-coder:3b-instruct
OLLAMA_ACTOR_TIMEOUT=30000

# Phi-3 Mini 3.8B - Critic (Validates actions)
OLLAMA_CRITIC_MODEL=phi3:3.8b-mini-instruct
OLLAMA_CRITIC_TIMEOUT=20000

# Nomic Embed - Embeddings for RAG
OLLAMA_EMBED_MODEL=nomic-embed-text

# === CONSENSUS PROTOCOL ===
# Level 1: Auto-execute if confidence >= 0.8 (read-only)
# Level 2: Requires Qwen+Phi consensus (remediation)
# Level 3: Always escalate to human (complex/risky)
CONSENSUS_L1_CONFIDENCE=0.8
CONSENSUS_L2_MIN_CONFIDENCE=0.6
CONSENSUS_TOTAL_TIMEOUT=60000

# === QDRANT (Vector DB for RAG) ===
QDRANT_URL=http://localhost:6333
QDRANT_COLLECTION=incidents_history

# === POSTGRESQL (N8N Database) ===
POSTGRES_USER=n8n
POSTGRES_PASSWORD=n8n_password
POSTGRES_DB=n8n

# === CLAUDE API (Niveau 2 Expert - Fallback) ===
ANTHROPIC_API_KEY=sk-ant-xxxxx
CLAUDE_MODEL=claude-sonnet-4-20250514
CLAUDE_TIMEOUT=120000

# === EMAIL SMTP ===
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=Auto-Repare <noreply@yourdomain.com>
ALERT_EMAIL_TO=admin@yourdomain.com

# === SECURITE ===
# Token pour valider les webhooks de confirmation email
VALIDATION_TOKEN_SECRET=generate-a-strong-random-string
# Expiration des tokens de validation (24h par defaut)
TOKEN_EXPIRY_HOURS=24

# === TIMEOUTS (millisecondes) ===
SSH_TIMEOUT=30000
ACTION_VERIFY_DELAY=30000
FLAPPING_WINDOW=60000

# === LOGGING ===
LOG_LEVEL=info
LOG_RETENTION_DAYS=90
